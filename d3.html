<doctype html>
<html>

<head>

<!-- jquery -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.0/jquery.min.js"></script>
    <!-- d3.js -->
    <script src="https://d3js.org/d3.v3.min.js" charset="utf-8"></script>

<title>d3</title>
<style >
	
.axis path,
.axis line {
    fill: none;
    stroke: black;
    shape-rendering: crispEdges;
}

.axis text {
    font-family: sans-serif;
    font-size: 11px;
}


</style>



</head>
<body>
<script >

dataset=
[{u'RMS': 1.23, u'DM': 30.57, u'Binary': u'Y', u'Period': 0.0040918, u'Raw Profiles': 520, u'Pulsar': u'1853+1303', u'TOAs': 1369, u'Period Derivative': 8.7164e-21}, 
{u'RMS': 2.7, u'DM': 9.02, u'Binary': u'Y', u'Period': 0.00525575, u'Raw Profiles': 726, u'Pulsar': u'1012+5307', u'TOAs': 11597, u'Period Derivative': 1.71268e-20}, {u'RMS': 3.67, u'DM': 41.49, u'Binary': u'-', u'Period': 0.00463803, u'Raw Profiles': 125, u'Pulsar': u'0931-1902', u'TOAs': 712, u'Period Derivative': 4.0544e-21}, {u'RMS': 1.35, u'DM': 38.78, u'Binary': u'Y', u'Period': 0.00306184, u'Raw Profiles': 688, u'Pulsar': u'0613-0200', u'TOAs': 7422, u'Period Derivative': 9.5904e-21}, {u'RMS': 1.01, u'DM': 52.33, u'Binary': u'Y', u'Period': 0.00359793, u'Raw Profiles': 603, u'Pulsar': u'1600-3053', u'TOAs': 7804, u'Period Derivative': 9.5005e-21}, {u'RMS': 4.6, u'DM': 152.96, u'Binary': u'-', u'Period': 0.00164561, u'Raw Profiles': 210, u'Pulsar': u'1747-4036', u'TOAs': 2771, u'Period Derivative': 1.31565e-20}, {u'RMS': 2.58, u'DM': 22.16, u'Binary': u'-', u'Period': 0.00522327, u'Raw Profiles': 403, u'Pulsar': u'2010-1323', u'TOAs': 7667, u'Period Derivative': 4.8245e-21}, {u'RMS': 0.6, u'DM': 20.71, u'Binary': u'Y', u'Period': 0.00237988, u'Raw Profiles': 468, u'Pulsar': u'2043+1711', u'TOAs': 1382, u'Period Derivative': 5.2427e-21}, {u'RMS': 0.72, u'DM': 23.92, u'Binary': u'Y', u'Period': 0.00289622, u'Raw Profiles': 435, u'Pulsar': u'2017+0603', u'TOAs': 1565, u'Period Derivative': 8.0006e-21}, {u'RMS': 5.52, u'DM': 13.3, u'Binary': u'Y', u'Period': 0.0053621, u'Raw Profiles': 696, u'Pulsar': u'1855+09', u'TOAs': 4005, u'Period Derivative': 1.78411e-20}, {u'RMS': 0.19, u'DM': 15.99, u'Binary': u'Y', u'Period': 0.00457014, u'Raw Profiles': 1609, u'Pulsar': u'1713+0747', u'TOAs': 15257, u'Period Derivative': 8.5297e-21}, {u'RMS': 4.4, u'DM': 18.86, u'Binary': u'-', u'Period': 0.00378816, u'Raw Profiles': 319, u'Pulsar': u'1923+2515', u'TOAs': 920, u'Period Derivative': 9.5525e-21}, {u'RMS': 4.6, u'DM': 4.33, u'Binary': u'-', u'Period': 0.00486545, u'Raw Profiles': 546, u'Pulsar': u'0030+0451', u'TOAs': 2455, u'Period Derivative': 1.01741e-20}, {u'RMS': 0.72, u'DM': 3.14, u'Binary': u'-', u'Period': 0.00407455, u'Raw Profiles': 670, u'Pulsar': u'1744-1134', u'TOAs': 8665, u'Period Derivative': 8.9339e-21}, {u'RMS': 0.2, u'DM': 10.39, u'Binary': u'Y', u'Period': 0.00294711, u'Raw Profiles': 857, u'Pulsar': u'1909-3744', u'TOAs': 10259, u'Period Derivative': 1.40254e-20}, {u'RMS': 5.79, u'DM': 13.73, u'Binary': u'Y', u'Period': 0.00519232, u'Raw Profiles': 218, u'Pulsar': u'2302+4442', u'TOAs': 3037, u'Period Derivative': 1.3771e-20}, {u'RMS': 0.65, u'DM': 18.46, u'Binary': u'Y', u'Period': 0.00316332, u'Raw Profiles': 647, u'Pulsar': u'1640+2224', u'TOAs': 2503, u'Period Derivative': 2.8175e-21}, {u'RMS': 1.34, u'DM': 14.32, u'Binary': u'Y', u'Period': 0.0030502, u'Raw Profiles': 335, u'Pulsar': u'0023+0923', u'TOAs': 4373, u'Period Derivative': 1.14211e-20}, {u'RMS': 1.87, u'DM': 28.19, u'Binary': u'-', u'Period': 0.00271911, u'Raw Profiles': 121, u'Pulsar': u'1832-0836', u'TOAs': 1131, u'Period Derivative': 8.7345e-21}, {u'RMS': 3.05, u'DM': 62.42, u'Binary': u'Y', u'Period': 0.00462164, u'Raw Profiles': 755, u'Pulsar': u'1643-1224', u'TOAs': 6921, u'Period Derivative': 1.84651e-20}, {u'RMS': 1.37, u'DM': 33.77, u'Binary': u'Y', u'Period': 0.0058501, u'Raw Profiles': 478, u'Pulsar': u'1738+0333', u'TOAs': 2623, u'Period Derivative': 2.41148e-20}, {u'RMS': 1.75, u'DM': 6.49, u'Binary': u'-', u'Period': 0.0051622, u'Raw Profiles': 389, u'Pulsar': u'1024-0719', u'TOAs': 4830, u'Period Derivative': 1.85516e-20}, {u'RMS': 0.57, u'DM': 18.25, u'Binary': u'-', u'Period': 0.0088535, u'Raw Profiles': 232, u'Pulsar': u'0645+5158', u'TOAs': 2891, u'Period Derivative': 4.92e-21}, {u'RMS': 1.58, u'DM': 9.03, u'Binary': u'Y', u'Period': 0.01605242, u'Raw Profiles': 570, u'Pulsar': u'2145-0750', u'TOAs': 7029, u'Period Derivative': 2.97898e-20}, {u'RMS': 4.36, u'DM': 13.57, u'Binary': u'Y', u'Period': 0.0079872, u'Raw Profiles': 726, u'Pulsar': u'1455-3330', u'TOAs': 4983, u'Period Derivative': 2.43033e-20}, {u'RMS': 3.2, u'DM': 24.34, u'Binary': u'-', u'Period': 0.0051852, u'Raw Profiles': 505, u'Pulsar': u'1944+0907', u'TOAs': 1696, u'Period Derivative': 1.73386e-20}, {u'RMS': 4.6, u'DM': 164.13, u'Binary': u'Y', u'Period': 0.01313818, u'Raw Profiles': 362, u'Pulsar': u'1949+3106', u'TOAs': 1409, u'Period Derivative': 9.95761e-20}, {u'RMS': 0.75, u'DM': 24.2, u'Binary': u'Y', u'Period': 0.00374715, u'Raw Profiles': 519, u'Pulsar': u'1741+1351', u'TOAs': 1588, u'Period Derivative': 3.02169e-20}, {u'RMS': 0.91, u'DM': 71.02, u'Binary': u'-', u'Period': 0.00155781, u'Raw Profiles': 1312, u'Pulsar': u'1937+21', u'TOAs': 0, u'Period Derivative': 1.051006e-19}, {u'RMS': 30.96, u'DM': 104.5, u'Binary': u'Y', u'Period': 0.00613317, u'Raw Profiles': 384, u'Pulsar': u'1953+29', u'TOAs': 1302, u'Period Derivative': 2.96849e-20}, {u'RMS': 1.66, u'DM': 22.56, u'Binary': u'Y', u'Period': 0.00311923, u'Raw Profiles': 446, u'Pulsar': u'2214+3000', u'TOAs': 2514, u'Period Derivative': 1.47013e-20}, {u'RMS': 1.82, u'DM': 26.6, u'Binary': u'Y', u'Period': 0.00764587, u'Raw Profiles': 693, u'Pulsar': u'1918-0642', u'TOAs': 9664, u'Period Derivative': 2.56913e-20}, {u'RMS': 1.37, u'DM': 34.48, u'Binary': u'Y', u'Period': 0.00315081, u'Raw Profiles': 433, u'Pulsar': u'1614-2230', u'TOAs': 7323, u'Period Derivative': 9.6242e-21}, {u'RMS': 3.13, u'DM': 297.56, u'Binary': u'Y', u'Period': 0.00214991, u'Raw Profiles': 479, u'Pulsar': u'1903+0327', u'TOAs': 1802, u'Period Derivative': 1.88105e-20}, {u'RMS': 5.14, u'DM': 49.58, u'Binary': u'-', u'Period': 0.00329934, u'Raw Profiles': 215, u'Pulsar': u'0340+4130', u'TOAs': 3003, u'Period Derivative': 7.0774e-21}, {u'RMS': 2.07, u'DM': 38.06, u'Binary': u'Y', u'Period': 0.00498358, u'Raw Profiles': 554, u'Pulsar': u'1910+1256', u'TOAs': 2631, u'Period Derivative': 9.6777e-21}, {u'RMS': 0.85, u'DM': 21.9, u'Binary': u'Y', u'Period': 0.00344525, u'Raw Profiles': 743, u'Pulsar': u'2317+1439', u'TOAs': 2620, u'Period Derivative': 2.4297e-21}]


/*var dataset = [
                  [ 5,     20 ],
                  [ 480,   90 ],
                  [ 250,   50 ],
                  [ 100,   33 ],
                  [ 330,   95 ],
                  [ 410,   12 ],
                  [ 475,   44 ],
                  [ 25,    67 ],
                  [ 85,    21 ],
                  [ 220,   88 ],
                  [1000,50]
              ];
*/
/*window.dataset = [
                  { "x":5, "y":20 },
                  { "x":480, "y":90 },
                  { "x":250, "y":50 },
                  { "x":100,   "y":33 },
                  {"x": 330,  "y": 95 },
                  { "x":410,"y":12 },
                  { "x":475, "y":44 },
                  { "x":25,"y":67 },
                  { "x":85, "y":21 },
                  { "x":220, "y":88 },
                  {"x":1000,"y":50}
              ];
*/
var newdataset = [

              ];

var w = 600;
var h = 600;
var padding = 50;





var yscale = d3.scale.log()
			 .domain([d3.min(dataset, function(d) { return Math.log10(d["Period Derivative"]); }), d3.max(dataset, function(d) { return Math.log10(d["Period Derivative"]); })])
             .range([padding, w-padding]);


var xscale = d3.scale.linear()
                     .domain([d3.min(dataset, function(d) { return Math.log10(d["Period"]); }), d3.max(dataset, function(d) { return Math.log10(d["Period"]); })])
                     .range([h-padding,padding]);

var xaxis = d3.svg.axis()
			.scale(xscale)
			.orient("bottom")
			.ticks(10);

var yaxis = d3.svg.axis()
                  .scale(yscale)
                  .orient("left")
                  .ticks(5);


/*var axis = d3.svg.axis()
			.ticks(5)
			.scale(xscale);
*/


	/*.call(axis);*/

	
	/*var circle = canvas.append("circle")
						.attr("cx",250)
						.attr("cy",250)
						.attr("r",4)
						.attr("fill","red")*/
	

var canvas =  d3.select("body").append("svg")
	.attr("width",w).attr("height",h)
   .call(d3.behavior.zoom().on("zoom", function () {
       canvas.attr("transform", "translate(" + d3.event.translate + ")" + " scale(" + d3.event.scale + ")")
      }))
	.append("g");
	


canvas.append("g")
    .attr("class", "x_axis") 
     .attr("transform", "translate(0," + (h - padding) + ")")//Assign "axis" class
    .call(xaxis);


canvas.append("g")
    .attr("class", "y_axis")
    .attr("transform", "translate(" + padding + ",0)")
    .call(yaxis);


periods_der = []
 for (i = 0; i < dataset.length; i++) {
        periods_der.push(Math.log10(dataset[i]['x']))
    }

    console.log(periods_der);

function refreshgraph(){

console.log(dataset);

  yscale.domain([d3.min(dataset, function(d) { return Math.log10(d["Period Derivative"]); }), d3.max(dataset, function(d) { return Math.log10(d["Period Derivative"]) ;} )]);
  xscale .domain([d3.min(dataset, function(d) { return Math.log10(d["Period"]); }), d3.max(dataset, function(d) { return Math.log10(d["Period"]); })]);

xaxis.scale(xscale);
yaxis.scale(yscale);

canvas.selectAll("g.x_axis").call(xaxis);
canvas.selectAll("g.y_axis").call(yaxis); 

/*
canvas.call(xaxis);
canvas.call(yaxis);
*/


canvas.selectAll("circle")
.data(dataset)
.enter()
.append("circle")

  .transition()
  .delay(function(d, i) {
    return i * 100;
  })
  .duration(3000)
 
.attr("cx", function(d) { return xscale(Math.log10(d["x"])) ;})
.attr("cy", function(d) { return yscale(d["y"]); })
.attr("r", "5px")
.attr("fill", "black")


}

function updateadd()
{

window.dataset.push({x:100,y:0},
                  {x:200,y:500},
                  {x:200,y:0},
                  {x:100,y:0},
                  {x:500,y:0},
                  {x:400,y:0},
                  {x:5000,y:0});

refreshgraph();
}
function updateadd1()
{

dataset.push([100,0],
                  [200,200],
                  [300,400],
                  [500,500],
                  [600,600],
                  [700,700],
                  [800,800]);

refreshgraph();
}

refreshgraph();



</script>


<button style="height:20px,width:20px" onclick="updateadd()">click</button>


<button style="height:20px,width:20px" onclick="updateadd1()">click</button>


</body>








</html>